# תרשים ארכיטקטורה - מערכת RAG עם MCP

```
┌─────────────────────────────────────────────────────────────────┐
│                    מערכת RAG עם MCP ו-Ollama                    │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│  ממשק משתמש      │    │   מערכת RAG      │    │   מודל שפה      │
│  (main.py)      │───▶│  (rag_agent.py) │───▶│   (Ollama)      │
│                 │    │                 │    │                 │
│ נקודת כניסה      │    │ מתאם בין רכיבים  │    │ יוצר תשובות     │
│ למערכת          │    │ ומנהל זרימה      │    │ חכמות           │
└─────────────────┘    └─────────────────┘    └─────────────────┘
                                │
                                ▼
                    ┌─────────────────────────┐
                    │      סוכן MCP          │
                    │     (tools.py)         │
                    │                        │
                    │ שלושה כלים עיקריים:     │
                    └─────────────────────────┘
                                │
                ┌───────────────┼───────────────┐
                ▼               ▼               ▼
    ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐
    │   כלי קריאה     │ │   כלי חלוקה     │ │   כלי חיפוש     │
    │                 │ │                 │ │                 │
    │ קורא קבצי טקסט   │ │ מחלק לקטעים     │ │ מוצא קטעים      │
    │ מהדיסק          │ │ קטנים           │ │ רלוונטיים       │
    └─────────────────┘ └─────────────────┘ └─────────────────┘
                                                    │
                                                    ▼
                                        ┌─────────────────┐
                                        │  מנוע Embeddings│
                                        │ (embeddings.py) │
                                        │                 │
                                        │ ממיר טקסט       │
                                        │ לוקטורים        │
                                        └─────────────────┘
                                                    │
                                                    ▼
                                        ┌─────────────────┐
                                        │  מאגר וקטורים   │
                                        │   (ChromaDB)    │
                                        │                 │
                                        │ שומר ומחפש      │
                                        │ וקטורים         │
                                        └─────────────────┘

זרימת המידע:
1. המשתמש שולח שאלה דרך הממשק
2. מערכת RAG מפעילה את כלי MCP
3. כלי הקריאה טוען את המסמך
4. כלי החלוקה מפצל לקטעים
5. כלי החיפוש מוצא קטעים רלוונטיים
6. מנוע ה-Embeddings יוצר וקטורים
7. מאגר הוקטורים שומר ומחפש
8. מודל השפה מקבל קטעים ויוצר תשובה
9. התשובה מוחזרת למשתמש
```